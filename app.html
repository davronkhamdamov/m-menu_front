<!DOCTYPE html>
<html lang="en" class="">
  <head>
    {{ head }}
    <script>
      try {
        const saved = localStorage.getItem("theme") || "system";
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        if (saved === "dark" || (saved === "system" && prefersDark)) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
      } catch (e) {
        console.error("Theme script error:", e);
      }
    </script>
  </head>
  <body>
    {{ app }}
  </body>
</html>
